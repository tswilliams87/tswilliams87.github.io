<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carousel</title>
  <link rel="stylesheet" href="app/styles.css">
</head>
<body>
  <div class="navbar">
    <a href="home.html">Home</a>
    <a href="carousel.html">Carousel</a>
    <a href="create-profile.html">Create Profile</a>
    <a href="profile.html">Profile</a>
  </div>

  <div class="carousel-container">
    <h1>Swipe Left or Right to find your future</h1>
    <div id="carousel" class="carousel">
      <!-- Cards will be dynamically added here -->
    </div>
  </div>

  <script type="module">
    import { fetchProfiles } from './api.js';

    const carousel = document.getElementById('carousel');
    let profiles = [];
    let currentIndex = 0;

    async function loadProfiles() {
      try {
        profiles = await fetchProfiles();
        updateCarousel();
      } catch (error) {
        console.error('Failed to fetch profiles:', error);
      }
    }

    function createCard(profile) {
      const card = document.createElement('div');
      card.className = 'card';

      const img = document.createElement('img');
      img.src = profile.picture;
      img.alt = profile.name;

      const name = document.createElement('h2');
      name.textContent = profile.name;

      const favorite = document.createElement('p');
      favorite.textContent = `Favorite: ${profile.favoriteThing}`;

      card.appendChild(img);
      card.appendChild(name);
      card.appendChild(favorite);

      return card;
    }

    function updateCarousel() {
      carousel.innerHTML = '';
      if (currentIndex < profiles.length) {
        const currentProfile = profiles[currentIndex];
        const card = createCard(currentProfile);
        carousel.appendChild(card);
      } else {
        carousel.innerHTML = '<p>No more profiles</p>';
      }
    }

    carousel.addEventListener('click', () => {
      currentIndex++;
      updateCarousel();
    });

    loadProfiles();
  </script>
</body>
</html>